<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Installation | ARGO</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700,300,300italic' rel='stylesheet' type='text/css'>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script>
  $(function () {
    $('#myTab a:last').tab('show')
  })
</script>


<body class="api">
  <header itemtype="http://schema.org/WPHeader" itemscope="itemscope" role="banner" class="site-header" id="header">
	<div class="container">
		<div class="title-area">
			<div class="site-title" itemtype="http://schema.org/Organization" itemscope="">
					<img src="/shared/images/argo-logo.png" itemprop="logo">
			</div>
		</div>
	</div>
</header>

<nav role="navigation" class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button data-target=".bs-navbar-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <nav role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/guides/overview" class="nav-overview">Overview</a></li>
        <li><a href="/guides/api/" class="nav-api">API</a></li>
<!--
        <li><a href="/guides/glossary/" class="nav-blog">Glossary</a></li>
-->
      </ul>
    </nav>
  </div>
</nav>
<!--<div id="header-wrapper">
-->
<!--  <div id="header">
    <div>
      <a class="logo" href="/">GRNET PID Service</a>
      <ul class="nav">
        <li><a href="/guides/overview" class="nav-overview">Overview</a></li>
        <li><a href="/guides/api/" class="nav-api">API</a></li>
        <li><a href="/guides/glossary/" class="nav-blog">Glossary</a></li>
      </ul>
    </div>
    </div>
    </div>
-->


  <div id="wrapper">
    <div class="content">
      
<h1 id="installation">Installation</h1>

<p>This document will guide you through the installation process. The ARGO A/R components include the following items:</p>

<ul>
  <li>Sync Components</li>
  <li>Consumer service</li>
  <li>Compute Engine</li>
  <li>API service</li>
  <li>Web UI service</li>
</ul>

<p>These can be co-located on a single machine or more. Note that with respect to the Compute Engine Component there are two options, either to use the standalone version or the distributed version. The latter one requires interconnection with a Hadoop cluster. </p>

<p>The minimum requirements to meet in case of a single machine (standalone version) are the following:</p>

<ul>
  <li>4 CPUs</li>
  <li>8 GB RAM</li>
  <li>200 GB Disk</li>
</ul>

<p>For a production scale environment we propose two machines and a Hadoop cluster (distributed version). This is the setup that is used in production for EGI purposes and needs. In this case the minimum requirements are</p>

<ul>
  <li>Node 1 (Sync components, Consumer service and Hadoop client)</li>
  <li>2 CPUs</li>
  <li>4GB RAM</li>
  <li>100 GB Disk</li>
  <li>Node 2 (API and Web UI services)</li>
  <li>2 CPUs</li>
  <li>4GB RAM</li>
  <li>100 GB Disk</li>
</ul>

<p>Instructions on setting up follow:</p>

<h2 id="standalone-mode">Standalone mode</h2>

<p>You will need a RHEL 6.x or similar (base installation) to proceed. As a first step make sure that on your host an ntp client service is configured properly. </p>

<h3 id="software-repositories">Software Repositories</h3>

<p>On your host the next step is to install (as root user) the ar-release package via yum:</p>

<pre><code># yum install http://rpm.hellasgrid.gr/mash/centos6-arstats/x86_64/ar-release-1.0.0-3.21.el6.noarch.rpm
</code></pre>

<p>This package will configure on the host(s) the repository files under <code>/etc/yum.repos.d</code>.</p>

<p>Also install the EPEL repository. This can be done by installing the epel-release package for the appropriate OS. For example:</p>

<pre><code># yum install http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm 
</code></pre>

<p>You will also need to install the cloudera repository for Hadoop components to be retrieved (although you will not install any Hadoop cluster, some libraries from the Hadoop ecosystem are needed). Under a file named <code>/etc/yum.repos.d/cloudera-cdh4.repo</code> place the following contents:</p>

<pre><code>[cloudera-cdh4]
name=Cloudera's Distribution for Hadoop, Version 4
baseurl=http://archive.cloudera.com/cdh4/redhat/6/$basearch/cdh/4/
gpgkey = http://archive.cloudera.com/cdh4/redhat/6/$basearch/cdh/RPM-GPG-KEY-cloudera
gpgcheck = 1
enabled = 1
</code></pre>

<p>You will also need to install the EGI trust anchors repository (this is needed on the host for communicating with GOCDB PI service). Under a file named <code>/etc/yum.repos.d/EGI-trustanchors.repo</code> place the following contents:</p>

<pre><code>[EGI-trustanchors]
name=EGI-trustanchors
baseurl=http://repository.egi.eu/sw/production/cas/1/current/
enabled=1
gpgcheck=1
gpgkey=http://repository.egi.eu/sw/production/cas/1/GPG-KEY-EUGridPMA-RPM-3
</code></pre>

<p>You will finally need to add a MongoDB repository. The name of the file should be <code>/etc/yum.repos.d/mongodb.repo</code>) and its contents should be:</p>

<pre><code>[mongodb]
name=MongoDB Repository
baseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/
gpgcheck=0
enabled=1
</code></pre>

<h3 id="sync-components-and-consumer-service">Sync Components and Consumer Service</h3>

<p>First of all install the ca_bundle meta-rpm with the following command:</p>

<pre><code># yum install ca-policy-egi-core
</code></pre>

<p>As a next step you should request and obtain an x509 host certificate from your national IGTF (Grid-related) approved CA and place the key/certificate pair under <code>/etc/grid-security/</code> folder with the following names and permissions:</p>

<ul>
  <li>Key file: <code>/etc/grid-security/hostkey.pem</code> and permissions: 0400</li>
  <li>Certificate file: <code>/etc/grid-security/hostcert.pem</code> and permissions: 0644</li>
</ul>

<p>Next, as root user install the following packages via yum:</p>

<pre><code># yum install ar-consumer
# yum install ar-sync
</code></pre>

<p>The ar-sync package installs components needed for refreshing the current status of the monitored system.</p>

<p>The ar-consumer service can be configured to connect to a pool of EGI message brokers. By default the config is set to <code>mq.afroditi.hellasgrid.gr</code> and <code>mq.cro-ngi.hr</code>. </p>

<p>This configuration is suggested as it will allow the consumer service to cycle to the next broker in the case the one it is connected to fails for some reason. </p>

<p>Start consumer service and make sure to add it to appropriate run levels:</p>

<pre><code># chkconfig ar-consumer on
# service ar-consumer start
</code></pre>


 <!--end item[:slug]-->
 </div>


    <div id="js-sidebar" class="sidebar-shell">
      <div class="sidebar-module">
        <ul>
          <li><h3><a href="/guides/overview">Overview</a></h3></li>
          <li><h3><a href="/guides/installation">Installation</a></h3></li>
          <li><h3><a href="#">Components</a></h3></li>
          <li><ul>
                <li><h3><a href="/guides/sync/">Sync Components</a></h3></li>
                <li><h3><a href="/guides/consumer/">Consumer</a></h3></li>
                <li><h3><a href="/guides/compute/">Compute Engine</a></h3></li>
                <li><h3><a href="/guides/api/">API</a></h3></li>
                <li><h3><a href="/guides/webui/">Web UI</a></h3></li>
          </ul></li>
        </ul> 
      </div>
      
<!--
<div class="sidebar-module notice padding10">
  <strong>API Url:</strong>
  <span>  The API URL (https://epic.grnet.gr/api/v2/handles/) is used as an example in these page. Each EPIC provider has each own EPIC API endpoint(s)</span>
</div>
-->
      <div class="sidebar-module padding10">
          <strong>Contact Us:</strong>
           <a href="mailto:argo-ggus-support@grnet.gr" target='blank'>Contact Us</a>
      </div><!--sidebar-module-->
	</div>
  </div><!-- #wrapper -->

  <footer itemtype="http://schema.org/WPFooter" itemscope="itemscope" role="contentinfo" class="site-footer" id="footer">
	<div class="wrap">
		<p>&nbsp;</p>
		<div class="footer-content footer-insert">
		<p class="copyright">Copyright &copy; 2014 <a rel="home" href="mailto:argo-ggus-support@grnet.gr" class="site-link" target='_blank'>ARGO Consortium</a>.</p>
		</div>
	</div>
</footer>

</body>
</html>


