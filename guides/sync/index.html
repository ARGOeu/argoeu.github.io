<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Sync compoments | ARGO</title>
  <link rel="alternate" type="application/atom+xml" title="API Changes" href="/changes.atom" />
  <link href="/css/reset.css" rel="stylesheet" type="text/css" />
  <link href="/css/960.css" rel="stylesheet" type="text/css" />
  <link href="/css/uv_active4d.css" rel="stylesheet" type="text/css" />
  <link href="/shared/css/documentation.css" media="screen" rel="stylesheet" type="text/css">
  <link href="/shared/css/pygments.css" media="screen" rel="stylesheet" type="text/css">
  <script src="/shared/js/jquery.js" type="text/javascript"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700,300,300italic' rel='stylesheet' type='text/css'>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<!-- Optional theme -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<!-- Latest compiled and minified JavaScript -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script>
  $(function () {
    $('#myTab a:last').tab('show')
  })
</script>


<body class="api">
  <header itemtype="http://schema.org/WPHeader" itemscope="itemscope" role="banner" class="site-header" id="header">
	<div class="container">
		<div class="title-area">
			<div class="site-title" itemtype="http://schema.org/Organization" itemscope="">
					<img src="/shared/images/argo-logo.png" itemprop="logo">
			</div>
		</div>
	</div>
</header>

<nav role="navigation" class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button data-target=".bs-navbar-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <nav role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/guides/overview" class="nav-overview">Overview</a></li>
        <li><a href="/guides/api/" class="nav-api">API</a></li>
<!--
        <li><a href="/guides/glossary/" class="nav-blog">Glossary</a></li>
-->
      </ul>
    </nav>
  </div>
</nav>
<!--<div id="header-wrapper">
-->
<!--  <div id="header">
    <div>
      <a class="logo" href="/">GRNET PID Service</a>
      <ul class="nav">
        <li><a href="/guides/overview" class="nav-overview">Overview</a></li>
        <li><a href="/guides/api/" class="nav-api">API</a></li>
        <li><a href="/guides/glossary/" class="nav-blog">Glossary</a></li>
      </ul>
    </div>
    </div>
    </div>
-->


  <div id="wrapper">
    <div class="content">
      
<h1 id="sync-compoments">Sync compoments</h1>

<p>This document describe the sync compoments.</p>

<h2 id="poem-profiles-sync">Poem profiles sync</h2>

<p>The poem profiles sync download the current poem profiles and stores them to a file.</p>

<p>There are four (4) config files: </p>

<ul>
  <li>
<code>/etc/ar-sync/poem.conf</code>, </li>
  <li>
<code>/etc/ar-sync/poem-profile.conf</code>, </li>
  <li>
<code>/etc/ar-sync/poem-server.conf</code> and</li>
  <li><code>/etc/ar-sync/poem-sync.conf</code></li>
</ul>

<p>This application requires host certificates and expects the certificate file to be installed at:
<code>/etc/grid-security/hostkey.pem</code>
<code>/etc/grid-security/hostcert.pem</code></p>

<p>The <code>poem.conf</code> config file look like this:</p>

<p><code>
mon.egi.eu;ops
</code></p>

<p>Each line in the <code>poem.conf</code> file defines a poem server from which to load profiles and a list of VOs to define which profiles are used.</p>

<p>In the deafult configuration profiles are loaded from one poem server: <code>mon.egi.eu</code>, and only ops VO’s profile are used.</p>

<p>The <code>poem-profile.conf</code> config file looks like this:</p>

<p><code>
CH.CERN.SAM.ROC
CH.CERN.SAM.ROC_OPERATORS
CH.CERN.SAM.ROC_CRITICAL
CH.CERN.SAM.OPS_MONITOR
CH.CERN.SAM.OPS_MONITOR_CRITICAL
CH.CERN.SAM.GLEXEC
CH.CERN.SAM.CLOUD-MON
</code></p>

<p>Each line in the <code>poem-profile.conf</code> file defines full name of filtered profiles list. So the list of profiles loaded form the servers are filtered according to this list.</p>

<p>The <code>poem-server.conf</code> config file looks like this:</p>

<p><code>
URL=http://gridops.cern.ch/config/nagios-roles.conf;ch.cern.sam.ROC,ch.cern.sam.ROC_OPERATORS,ch.cern.sam.ROC_CRITICAL,ch.cern.sam.GLEXEC
ALL:ops-monitor.cern.ch;ch.cern.sam.OPS_MONITOR,ch.cern.sam.OPS_MONITOR_CRITICAL
</code></p>

<p>Finally, the <code>poem-sync.conf</code> file contains all the information regarding the configurations themselves:</p>

<p>```</p>

<p>poemFile = ‘/etc/ar-sync/poem.conf’
poemProfileFile = ‘/etc/ar-sync/poem-profile.conf’
poemServerFile = ‘/etc/ar-sync/poem-server.conf’
poemRequest = ‘%s/poem/api/0.2/json/metrics_in_profiles/?vo_name=%s’
hostKey = ‘/etc/grid-security/hostkey.pem’
hostCert = ‘/etc/grid-security/hostcert.pem’</p>

<p>outputDir = ‘/var/lib/ar-sync’
avroOutputDir = ‘/var/lib/ar-sync’
avroOutputSchema = ‘/etc/ar-sync/metric_profiles.avsc’</p>

<p>```</p>


 <!--end item[:slug]-->
 </div>


    <div id="js-sidebar" class="sidebar-shell">
      <div class="sidebar-module">
        <ul>
          <li><h3><a href="/guides/overview">Overview</a></h3></li>
          <li><h3><a href="/guides/installation">Installation</a></h3></li>
          <li><h3><a href="#">Components</a></h3></li>
          <li><ul>
                <li><h3><a href="/guides/sync/">Sync Components</a></h3></li>
                <li><h3><a href="/guides/consumer/">Consumer</a></h3></li>
                <li><h3><a href="/guides/compute/">Compute Engine</a></h3></li>
                <li><h3><a href="/guides/api/">API</a></h3></li>
                <li><h3><a href="/guides/webui/">Web UI</a></h3></li>
          </ul></li>
        </ul> 
      </div>
      
<!--
<div class="sidebar-module notice padding10">
  <strong>API Url:</strong>
  <span>  The API URL (https://epic.grnet.gr/api/v2/handles/) is used as an example in these page. Each EPIC provider has each own EPIC API endpoint(s)</span>
</div>
-->
      <div class="sidebar-module padding10">
          <strong>Contact Us:</strong>
           <a href="mailto:contact@argodoc.eu" target='blank'>Contact Us</a>
      </div><!--sidebar-module-->
	</div>
  </div><!-- #wrapper -->

  <footer itemtype="http://schema.org/WPFooter" itemscope="itemscope" role="contentinfo" class="site-footer" id="footer">
	<div class="wrap">
		<p>&nbsp;</p>
		<div class="footer-content footer-insert">
		<p class="copyright">Copyright &copy; 2014 <a rel="home" href="mailto:contact@argodoc.eu" class="site-link" target='_blank'>ARGO Consurtium</a>.</p>
		</div>
	</div>
</footer>

</body>
</html>


